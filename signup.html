<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Join • Club</title>
    <link rel="stylesheet" href="styles.css" />
</head>

<body>
    <header class="topbar">
        <div class="wrap bar">
            <div class="logo"><a class="plain" href="index.html"> Mipc Coding & Robotics CLUB</a></div>
            <nav class="nav">
                <a href="login.html" class="btn outline">Login</a>
            </nav>
        </div>
    </header>

    <main class="wrap auth">
        <div class="auth-shell">
            <div class="auth-left">
                <h1>Join the Club</h1>
                <p class="muted">
                    Create your member account. After joining, you’ll be redirected to the dashboard.
                </p>
                <div class="note">
                    <div class="note-title">Quick rules</div>
                    <ul class="list">
                        <li><span class="dot"></span> Respect the lab and equipment</li>
                        <li><span class="dot"></span> Commit code to the team repo</li>
                        <li><span class="dot"></span> Document what you build</li>
                    </ul>
                </div>
            </div>

            <form class="form" id="signupForm">
                <div class="form-head">
                    <div class="form-title">Create account</div>
                    <div class="muted small">Takes less than a minute.</div>
                </div>

                <div class="field">
                    <label>Full name</label>
                    <input type="text" id="name" placeholder="Your name" required />
                </div>

                <div class="field">
                    <label>Email</label>
                    <input type="email" id="email" placeholder="you@example.com" required />
                </div>

                <div class="field">
                    <label>Password</label>
                    <input type="password" id="password" placeholder="Min 6 characters" minlength="6" required />
                </div>

                <button class="btn full" type="submit">Join and continue</button>

                <div class="alert" id="signupAlert" aria-live="polite"></div>

                <div class="muted small">
                    Already joined? <a class="link" href="login.html">Login</a>
                </div>
            </form>
        </div>
    </main>

    <footer class="footer">
        <div class="wrap foot">
            <div class="muted">Demo auth: stored locally in your browser.</div>
        </div>
    </footer>

    <script src="app.js"></script>
    <script>
        if (localStorage.getItem("session")) window.location.href = "dashboard.html";

        const form = document.getElementById("signupForm");
        const alertBox = document.getElementById("signupAlert");

        form.addEventListener("submit", async (e) => {
            e.preventDefault();
            alertBox.textContent = "";
            alertBox.classList.remove("show", "ok");

            const name = document.getElementById("name").value.trim();
            const email = document.getElementById("email").value.trim().toLowerCase();
            const password = document.getElementById("password").value;

            const res = await Auth.signup(name, email, password);

            if (!res.ok) {
                alertBox.textContent = res.message;
                alertBox.classList.add("show");
                return;
            }

            alertBox.textContent = "Account created. Redirecting...";
            alertBox.classList.add("show", "ok");
            setTimeout(() => (window.location.href = "dashboard.html"), 500);
        });
    </script>
</body>

</html>