<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Login • Club</title>
    <link rel="stylesheet" href="styles.css" />
</head>

<body>
    <header class="topbar">
        <div class="wrap bar">
            <div class="logo"><a class="plain" href="index.html"> Mipc Coding & Robotics CLUB</a></div>
            <nav class="nav">
                <a href="signup.html" class="btn outline">Join</a>
            </nav>
        </div>
    </header>

    <main class="wrap auth">
        <div class="auth-shell">
            <div class="auth-left">
                <h1>Member Login</h1>
                <p class="muted">Access resources, project guides, and your dashboard.</p>
                <div class="note">
                    <div class="note-title">What you get</div>
                    <ul class="list">
                        <li><span class="dot"></span> Project build guides</li>
                        <li><span class="dot"></span> Weekly tasks and resources</li>
                        <li><span class="dot"></span> Team roles and progress</li>
                    </ul>
                </div>
            </div>

            <form class="form" id="loginForm">
                <div class="form-head">
                    <div class="form-title">Login</div>
                    <div class="muted small">Use your email and password.</div>
                </div>

                <div class="field">
                    <label>Email</label>
                    <input type="email" id="loginEmail" placeholder="you@example.com" required />
                </div>

                <div class="field">
                    <label>Password</label>
                    <input type="password" id="loginPassword" placeholder="••••••••" required />
                </div>

                <button class="btn full" type="submit">Continue</button>

                <div class="alert" id="loginAlert" aria-live="polite"></div>

                <div class="muted small">
                    No account? <a class="link" href="signup.html">Create one</a>
                </div>
            </form>
        </div>
    </main>

    <footer class="footer">
        <div class="wrap foot">
            <div class="muted">Demo auth: stored locally in your browser.</div>
        </div>
    </footer>

    <script src="app.js"></script>
    <script>
        if (localStorage.getItem("session")) window.location.href = "dashboard.html";

        const form = document.getElementById("loginForm");
        const alertBox = document.getElementById("loginAlert");

        form.addEventListener("submit", async (e) => {
            e.preventDefault();
            alertBox.textContent = "";
            alertBox.classList.remove("show", "ok");

            const email = document.getElementById("loginEmail").value.trim().toLowerCase();
            const password = document.getElementById("loginPassword").value;

            const res = await Auth.login(email, password);

            if (!res.ok) {
                alertBox.textContent = res.message;
                alertBox.classList.add("show");
                return;
            }

            alertBox.textContent = "Logged in. Redirecting...";
            alertBox.classList.add("show", "ok");
            setTimeout(() => (window.location.href = "dashboard.html"), 500);
        });
    </script>
</body>

</html>