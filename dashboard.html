<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard • Club</title>
    <link rel="stylesheet" href="styles.css" />
</head>

<body>
    <header class="topbar">
        <div class="wrap bar">
            <div class="logo"><a class="plain" href="index.html"> Mipc Coding & Robotics CLUB</a></div>
            <nav class="nav">
                <button class="btn outline" id="logoutBtn" type="button">Logout</button>
            </nav>
        </div>
    </header>

    <main class="wrap dash">
        <section class="dash-head">
            <div>
                <div class="kicker">Member Dashboard</div>
                <h1 id="hello">Hi</h1>
                <div class="muted" id="emailLine"></div>
            </div>
            <div class="dash-actions">
                <button class="btn" id="copyId" type="button">Copy Member ID</button>
            </div>
        </section>

        <section class="dash-grid">
            <div class="block">
                <div class="block-title">Your tasks</div>
                <div class="block-body">
                    <ul class="tasklist">
                        <li><span class="check"></span> Read: Git branching workflow</li>
                        <li><span class="check"></span> Build: ultrasonic distance demo</li>
                        <li><span class="check"></span> Code: DOM events mini project</li>
                        <li><span class="check"></span> Document your results</li>
                    </ul>
                </div>
            </div>

            <div class="block">
                <div class="block-title">Club resources</div>
                <div class="block-body">
                    <div class="resource"><span class="dot"></span> Starter kits checklist</div>
                    <div class="resource"><span class="dot"></span> Arduino wiring reference</div>
                    <div class="resource"><span class="dot"></span> Web UI components practice</div>
                    <div class="resource"><span class="dot"></span> Weekly challenges</div>
                </div>
            </div>

            <div class="block">
                <div class="block-title">Member info</div>
                <div class="block-body">
                    <div class="kv">
                        <div class="k">Member ID</div>
                        <div class="v" id="uid">—</div>
                    </div>
                    <div class="kv">
                        <div class="k">Joined</div>
                        <div class="v" id="joined">—</div>
                    </div>
                    <div class="kv">
                        <div class="k">Status</div>
                        <div class="v">Active</div>
                    </div>
                </div>
            </div>

            <div class="block">
                <div class="block-title">Team roles (sample)</div>
                <div class="block-body">
                    <div class="role">
                        <div class="role-name">Builder</div>
                        <div class="muted small">Hardware assembly & wiring</div>
                    </div>
                    <div class="role">
                        <div class="role-name">Coder</div>
                        <div class="muted small">Programming & debugging</div>
                    </div>
                    <div class="role">
                        <div class="role-name">Documenter</div>
                        <div class="muted small">Notes, diagrams, README</div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="footer">
        <div class="wrap foot">
            <div class="muted">You are logged in on this device.</div>
        </div>
    </footer>

    <script src="app.js"></script>
    <script>
        const session = Auth.getSession();
        if (!session) window.location.href = "login.html";

        const user = Auth.getUserById(session.userId);
        if (!user) {
            Auth.logout();
            window.location.href = "login.html";
        }

        document.getElementById("hello").textContent = `Hi, ${user.name}`;
        document.getElementById("emailLine").textContent = user.email;
        document.getElementById("uid").textContent = user.id;
        document.getElementById("joined").textContent = new Date(user.createdAt).toLocaleString();

        document.getElementById("logoutBtn").addEventListener("click", () => {
            Auth.logout();
            window.location.href = "index.html";
        });

        document.getElementById("copyId").addEventListener("click", async () => {
            try {
                await navigator.clipboard.writeText(user.id);
                document.getElementById("copyId").textContent = "Copied";
                setTimeout(() => (document.getElementById("copyId").textContent = "Copy Member ID"), 900);
            } catch {
                document.getElementById("copyId").textContent = "Copy failed";
                setTimeout(() => (document.getElementById("copyId").textContent = "Copy Member ID"), 900);
            }
        });
    </script>
</body>

</html>